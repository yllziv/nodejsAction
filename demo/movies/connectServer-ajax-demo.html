<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
    <script src="../../node_modules/jquery/dist/jquery.js"></script>
</head>
<body>
<script>

/*    // ------------------------javascript调用原生ajax：复杂版-----------------------------------
    function connect() {
        xmlHttpRequest = createXmlHttpRequest();
        xmlHttpRequest.onreadystatechange = zswFun;
        var url = "http://192.168.2.113:3000/";
        xmlHttpRequest.open("GET", url, false); //xmlHttp.open的第三个参数是控制同步还是异步的true=异步, false=同步
    }

    function createXmlHttpRequest() {
        var xhr;
        if (window.ActiveXObject) { //如果是IE浏览器
            var activexName = ["MSXML2.XMLHTTP", "Microsoft.XMLHTTP"];
            for (var i = 0; i < activexName.length; i++) {
                try {
                    xhr = new ActiveXObject(activexName[i]);
                    break;
                } catch (e) {
                }
            }
        } else if (window.XMLHttpRequest) { //非IE浏览器
            xhr = new XMLHttpRequest();
        }
        return xhr;
    }

    function zswFun() {
//  alert(xmlHttpRequest.readyState+","+xmlHttpRequest.status)
        if (xmlHttpRequest.readyState == 1) {
            xmlHttpRequest.setRequestHeader("Content-type", "application/json;charset=utf8")
            xmlHttpRequest.send("")
        }
        if (xmlHttpRequest.readyState == 4) {
            if (xmlHttpRequest.status == 200) {
                var result = JSON.parse(xmlHttpRequest.responseText);
//            alert("js原生调用" + JSON.stringify(result))
            }
        }
    }
    connect();*/

/*    // ------------------------javascript调用原生ajax：简版-----------------------------------
    function ajax(url) {
        var xmlHttp = new XMLHttpRequest();
        xmlHttp.open("GET", url, false); // 设置为异步
        xmlHttp.send(null);
        return xmlHttp.responseText;
    }
    alert("javascript调用原生ajax：简版" + ajax("http://192.168.2.113:3000/"))*/

/*    // -------------------------jquery的ajax设置为同步，方式1-----------------------------------
    var a = null;//
    $.ajax({
        type: "get",
        url: "http://192.168.2.113:3000/",
        async: false, // 设置为同步，true为异步
        success: function (data) {
            a = data;
        }
    });
    alert("jquery同步调用，方式一" + JSON.stringify(a));*/

/*    // -------------------------jquery的post设置为同步，方式2-----------------------------------
    //在全局或某个需要的函数内设置Ajax异步为false，也就是同步
    var b = null;
    $.ajaxSetup({
        async: false  // 设置为同步，true为异步
    });
    //然后再进行你的Ajax操作
    $.post("http://192.168.2.113:3000/", function (data, status) {
        if (status == "success") {
            b = data;//赋值给全局变量
        }
        else {
            alert("wrong");
        }
    });
    alert("jquery同步调用，方式二" + JSON.stringify(b));*/

/*    // ------------------------------------解释ajax异步调用：在回调函数中调用------------------------------------
    var getData = function (cb) {
        var data = {};
        setTimeout(function () {
            data.prop = '成功得到数据';
            cb();
        }, 500);
        return data;
    };

    var data = getData(function () { // 参数为一个函数
        alert('回调函数结果 ' + data.prop); // 可以得到数据
    });
    alert('直接执行结果 ' + data.prop); // 得不到数据*/

/*    // ------------------------------------解释ajax异步调用：在回调函数中调用------------------------------------
    var result = null;
    $.ajax({
        url : 'http://192.168.2.113:3000/',
        dataType : "json",
        type : "GET",
    }).done(function(data) {
        result = data;
        callback();//调用回调函数。
    });
    function callback() {
        alert(JSON.stringify(result))
    }*/

/*   // ------------------------------------模拟ajax异步调用------------------------------------
    // 这是一个模拟ajax异步返回数据
    var getData = function () {
        var dataLocal = null;
        setTimeout(function () {
            dataLocal = '成功得到数据';
        }, 500);
        return dataLocal;
    };
    var data = getData();
    alert(JSON.stringify(data)); // 得到null*/

</script>
</body>
</html>